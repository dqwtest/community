pipeline {
   agent any

   stages {
      stage('pull code') {
          steps {
            checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'a8e22755-a0e8-4075-8429-6ac0f52d74f9', url: 'https://github.com/dqwtest/community.git']]])
          }
      }
      stage('build project') {
          steps {
            sh label: '', script: 'mvn clean package'
          }
      }
      stage('publish project') {
          steps {
            deploy adapters: [tomcat8(credentialsId: '281145a3-9ff5-4245-b756-af81aa2acfab', path: '', url: 'http://47.98.200.72:8080/')], contextPath: null, war: 'target/*.war'
          }
      }
   }
}

